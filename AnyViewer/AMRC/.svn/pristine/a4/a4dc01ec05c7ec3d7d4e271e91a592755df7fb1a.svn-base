/******************************************************************************
* 
* SaxListCtrl
* Version
* Copyright (C) 2007 Ax3soft Co., Ltd.
* All Rights Reserved
* $Header: /cvsdata/vc/Common/GeneralFunctions.h,v 1.17 2014/12/13 01:42:27 administrator Exp $
* 
*******************************************************************************
* 
* Description:General functions define,Dependent MFC library
******************************************************************************/
#include "stdafx.h"
#include "CostProtocol.h"


REGISTER_CLASS(CBaseAccountInfo)
REGISTER_CLASS(CWorkClientInfo)
REGISTER_CLASS(CMaterialEntery)
REGISTER_CLASS(CCloudBOQSummary)
REGISTER_CLASS(CAuth2LoginData)
REGISTER_CLASS(COpeningBidInfo)
REGISTER_CLASS(CGoodsInfo)
REGISTER_CLASS(CPrePayment)
REGISTER_CLASS(CServiceInfo)
REGISTER_CLASS(CEnterpriseEmploye)
REGISTER_CLASS(CCredentialsLevel)
REGISTER_CLASS(CWinningBidAchievement)
REGISTER_CLASS(CEnterpriseInfoBase)
REGISTER_CLASS(CFullEnterpriseInfo)
REGISTER_CLASS(CQueryEnterpriseArgs)

REGISTER_CLASS(CTeamInfo)
REGISTER_CLASS(CFriendSearchSettings)
REGISTER_CLASS(CAppendFriendSettings)
REGISTER_CLASS(CTeamMemberAccountInfo)


//--------------------------------------------------------------------------------
/// <summary>
/// 根据账号得到对应的名称
/// </summary>
/// <param name="nAccount">账号</param>
/// <param name="arrMemberPtr">成员列表数组</param>
/// <returns>名称</returns>
/// <created>Andy,2020/1/5</created>
/// <changed>Andy,2020/1/5</changed>
//--------------------------------------------------------------------------------
std::string GetNamebyAccount(const UINT nAccount, const ACCOUNT_INFO_ARRAY_PTR arrMemberPtr)
{
	std::string strResult;

	if (nullptr != arrMemberPtr)
	{
		auto itr = arrMemberPtr->begin();

		for (; arrMemberPtr->end() != itr; itr++)
		{
			if ((*itr)->GetAccount() == nAccount)
			{
				strResult = (*itr)->GetName();
				break;
			}
		}
	}

	return strResult;
}


/*--------------------------CBaseAccountInfo--------------------------------*/
CBaseAccountInfo::CBaseAccountInfo(const char* pName)
	: CSerializeEntry()
	, m_nAccount(0)
	, m_strName(pName)
	, m_nType(CCT_CUSTOMER)
	, m_nCreator(0)
{
}

CBaseAccountInfo::~CBaseAccountInfo()
{

}

CBaseAccountInfo::CBaseAccountInfo(const CBaseAccountInfo & refBaseAccountInfo)
    :m_nAccount(refBaseAccountInfo.m_nAccount)
    , m_strName(refBaseAccountInfo.m_strName)
    , m_nType(refBaseAccountInfo.m_nType)
	, m_nCreator(refBaseAccountInfo.m_nCreator)

{
}

CBaseAccountInfo & CBaseAccountInfo::operator=(const CBaseAccountInfo & refBaseAccountInfo)
{
    if (this == &refBaseAccountInfo)
    {
        return *this;
    }

    m_nAccount = refBaseAccountInfo.m_nAccount;
    m_strName = refBaseAccountInfo.m_strName;
    m_nType = refBaseAccountInfo.m_nType;
	m_nCreator = refBaseAccountInfo.m_nCreator;

    return *this;
}

void CBaseAccountInfo::Serialize(CJSONSerializer& refJsonSerializer) const 
{
	CSerializeEntry::Serialize(refJsonSerializer);

	refJsonSerializer.Serialize("m1", m_nAccount);
	refJsonSerializer.Serialize("m2", m_strName);
	refJsonSerializer.Serialize("m3", m_nType);
	refJsonSerializer.Serialize("m4", m_nCreator);
}

void CBaseAccountInfo::DeSerialize(CJSONSerializer& refJsonSerializer) 
{
	CSerializeEntry::DeSerialize(refJsonSerializer);

	refJsonSerializer.DeSerialize("m1", m_nAccount);
	refJsonSerializer.DeSerialize("m2", m_strName);
	refJsonSerializer.DeSerialize("m3", m_nType);
	refJsonSerializer.DeSerialize("m4", m_nCreator);
}

/*--------------------CAccountInfo----------------------------------*/
CAccountInfo::CAccountInfo(const char* pName, const char* pPwd)
	: CBaseAccountInfo(pName)
	, m_strPWD(pPwd)
	, m_strTel("")
	, m_strCompany("")
	, m_strEmail("")
	, m_strWeb("")
	, m_strAddr("")
	, m_strMemo("")
	, m_nMoney(0)
	, m_nIP(0)
{
}

CAccountInfo::CAccountInfo(const CAccountInfo & refAccountInfo)
    :CBaseAccountInfo(refAccountInfo)
    , m_strPWD(refAccountInfo.m_strPWD)
    , m_strTel(refAccountInfo.m_strTel)
    , m_strCompany(refAccountInfo.m_strCompany)
    , m_strEmail(refAccountInfo.m_strEmail)
    , m_strWeb(refAccountInfo.m_strWeb)
    , m_strAddr(refAccountInfo.m_strAddr)
    , m_strMemo(refAccountInfo.m_strMemo)
    , m_nMoney(refAccountInfo.m_nMoney)
    , m_strMachineID(refAccountInfo.m_strMachineID)
    , m_nIP(refAccountInfo.m_nIP)
{
}

CAccountInfo & CAccountInfo::operator=(const CAccountInfo & refAccountInfo)
{
    if (this == &refAccountInfo)
    {
        return *this;
    }

    CBaseAccountInfo::operator=(refAccountInfo);

    m_strPWD = refAccountInfo.m_strPWD;
    m_strTel = refAccountInfo.m_strTel;
    m_strCompany = refAccountInfo.m_strCompany;
    m_strEmail = refAccountInfo.m_strEmail;
    m_strWeb = refAccountInfo.m_strWeb;
    m_strAddr = refAccountInfo.m_strAddr;
    m_strMemo = refAccountInfo.m_strMemo;
    m_nMoney = refAccountInfo.m_nMoney;
    m_strMachineID = refAccountInfo.m_strMachineID;
    m_nIP = refAccountInfo.m_nIP;

    return *this;
}

void CAccountInfo::Serialize(CJSONSerializer& refJsonSerializer) const
{
	CBaseAccountInfo::Serialize(refJsonSerializer);

	refJsonSerializer.Serialize("m11", m_strPWD);
	refJsonSerializer.Serialize("m12", m_strTel);
	refJsonSerializer.Serialize("m13", m_strCompany);
	refJsonSerializer.Serialize("m14", m_strEmail);
	refJsonSerializer.Serialize("m15", m_strWeb);
	refJsonSerializer.Serialize("m16", m_strAddr);
	refJsonSerializer.Serialize("m17", m_strMemo);
	refJsonSerializer.Serialize("m18", m_nMoney);
	refJsonSerializer.Serialize("m19", m_strMachineID);
	refJsonSerializer.Serialize("m20", m_nIP);
    refJsonSerializer.Serialize("m21", m_strUnionid);
    refJsonSerializer.Serialize("m22", m_strNickname);
    refJsonSerializer.Serialize("m23", m_bSex);
}

void CAccountInfo::DeSerialize(CJSONSerializer& refJsonSerializer)
{
	CBaseAccountInfo::DeSerialize(refJsonSerializer);

	refJsonSerializer.DeSerialize("m11", m_strPWD);
	refJsonSerializer.DeSerialize("m12", m_strTel);
	refJsonSerializer.DeSerialize("m13", m_strCompany);
	refJsonSerializer.DeSerialize("m14", m_strEmail);
	refJsonSerializer.DeSerialize("m15", m_strWeb);
	refJsonSerializer.DeSerialize("m16", m_strAddr);
	refJsonSerializer.DeSerialize("m17", m_strMemo);
	refJsonSerializer.DeSerialize("m18", m_nMoney);
	refJsonSerializer.DeSerialize("m19", m_strMachineID);
	refJsonSerializer.DeSerialize("m20", m_nIP);
    refJsonSerializer.DeSerialize("m21", m_strUnionid);
    refJsonSerializer.DeSerialize("m22", m_strNickname);
    refJsonSerializer.DeSerialize("m23", m_bSex);
}


CCustomerActivity::CCustomerActivity()
	: m_nAccount(0)
	, m_nIP(0)
	, m_nBeginTime(0)
	, m_nEndTime(0)
{
}

CCustomerActivity::~CCustomerActivity()
{
}

void CCustomerActivity::Serialize(CJSONSerializer& refJsonSerializer) const
{
	CSerializeEntry::Serialize(refJsonSerializer);

	refJsonSerializer.Serialize("m11", m_nAccount);
	refJsonSerializer.Serialize("m12", m_nIP);
	refJsonSerializer.Serialize("m13", m_nBeginTime);
	refJsonSerializer.Serialize("m14", m_nEndTime);
}

void CCustomerActivity::DeSerialize(CJSONSerializer& refJsonSerializer)
{
	CSerializeEntry::DeSerialize(refJsonSerializer);

	refJsonSerializer.DeSerialize("m11", m_nAccount);
	refJsonSerializer.DeSerialize("m12", m_nIP);
	refJsonSerializer.DeSerialize("m13", m_nBeginTime);
	refJsonSerializer.DeSerialize("m14", m_nEndTime);
}


void CWorkClientInfo::Serialize(CJSONSerializer& refJsonSerializer) const
{
	CSerializeEntry::Serialize(refJsonSerializer);

	refJsonSerializer.Serialize("m11", m_nCPUs);
	refJsonSerializer.Serialize("m12", m_nMemory);
	refJsonSerializer.Serialize("m13", m_nBackup);

}

void CWorkClientInfo::DeSerialize(CJSONSerializer& refJsonSerializer)
{
	CSerializeEntry::DeSerialize(refJsonSerializer);

	refJsonSerializer.DeSerialize("m11", m_nCPUs);
	refJsonSerializer.DeSerialize("m12", m_nMemory);
	refJsonSerializer.DeSerialize("m13", m_nBackup);
}

void CMaterialEntery::Serialize(CJSONSerializer& refJsonSerializer) const
{
	CSerializeEntry::Serialize(refJsonSerializer);

	refJsonSerializer.Serialize("m11", m_nID);
	refJsonSerializer.Serialize("m12", m_strName);
	refJsonSerializer.Serialize("m13", m_strModel);
	refJsonSerializer.Serialize("m14", m_strUnit);
	refJsonSerializer.Serialize("m15", m_nPrice);
	refJsonSerializer.Serialize("m16", m_strReferenceName);
	refJsonSerializer.Serialize("m17", m_nSimilarity);
	refJsonSerializer.Serialize("m18", m_strBaseName);
	refJsonSerializer.Serialize("m19", m_strBaseModel);
}


void CMaterialEntery::DeSerialize(CJSONSerializer & refJsonSerializer)
{
	CSerializeEntry::DeSerialize(refJsonSerializer);

	refJsonSerializer.DeSerialize("m11", m_nID);
	refJsonSerializer.DeSerialize("m12", m_strName);
	refJsonSerializer.DeSerialize("m13", m_strModel);
	refJsonSerializer.DeSerialize("m14", m_strUnit);
	refJsonSerializer.DeSerialize("m15", m_nPrice);
	refJsonSerializer.DeSerialize("m16", m_strReferenceName);
	refJsonSerializer.DeSerialize("m17", m_nSimilarity);
	refJsonSerializer.DeSerialize("m18", m_strBaseName);
	refJsonSerializer.DeSerialize("m19", m_strBaseModel);
}



void CAMMPriceInfo::Serialize(CJSONSerializer& refJsonSerializer) const
{
	CSerializeEntry::Serialize(refJsonSerializer);

	refJsonSerializer.Serialize("m11", m_nAccount);
	refJsonSerializer.Serialize("m12", m_strProvince);
	refJsonSerializer.Serialize("m13", m_strMunicipality);
	refJsonSerializer.Serialize("m14", m_strCounty);
	refJsonSerializer.Serialize("m15", m_strGUID);
	refJsonSerializer.Serialize("m16", m_arrMaterials);
	refJsonSerializer.Serialize("m17", m_nExpenses);
}


void CAMMPriceInfo::DeSerialize(CJSONSerializer & refJsonSerializer)
{
	CSerializeEntry::DeSerialize(refJsonSerializer);

	refJsonSerializer.DeSerialize("m11", m_nAccount);
	refJsonSerializer.DeSerialize("m12", m_strProvince);
	refJsonSerializer.DeSerialize("m13", m_strMunicipality);
	refJsonSerializer.DeSerialize("m14", m_strCounty);
	refJsonSerializer.DeSerialize("m15", m_strGUID);
	refJsonSerializer.DeSerialize("m16", m_arrMaterials);
	refJsonSerializer.DeSerialize("m17", m_nExpenses);
}

//--------------------------------------------------------------------------------
/// <summary>
/// 得到需要查询价格的材料记录
/// </summary>
/// <param name="nIndex">序号</param>
/// <returns>成功返回指向材料记录对象的指针，否则null</returns>
/// <created>Andy,2019/6/24</created>
/// <changed>Andy,2019/6/24</changed>
//--------------------------------------------------------------------------------
CMaterialEntery* CAMMPriceInfo::GetMaterialEntery(unsigned int nIndex)
{
#ifndef WIN32
	std::unique_lock<std::mutex> objAutoLock(m_objMutex);
#endif

	CMaterialEntery* pResult = nullptr;

	if (nIndex < m_arrMaterials.size())
	{
		pResult = m_arrMaterials[nIndex];
	}

	return pResult;
}

//--------------------------------------------------------------------------------
/// <summary>
/// 
/// </summary>
/// <param name="refName"></param>
/// <param name="refModel"></param>
/// <param name="refUint"></param>
/// <returns></returns>
/// <created>Andy,2019/7/10</created>
/// <changed>Andy,2019/7/10</changed>
//--------------------------------------------------------------------------------
CMaterialEntery* CAMMPriceInfo::Lookup(
	const std::string refName
	, const std::string refModel
	, const std::string refUint)
{
#ifndef WIN32
	std::unique_lock<std::mutex> objAutoLock(m_objMutex);
#endif
	CMaterialEntery* pResult = nullptr;

	for (CMaterialEntery* pEntery : m_arrMaterials)
	{
		if (pEntery->GetName() == refName
			&& pEntery->GetModel() == refModel
			&& pEntery->GetUnit() == refUint)
		{
			pResult = pEntery;
			break;
		}
	}	

	return pResult;
}


//--------------------------------------------------------------------------------
/// <summary>
/// 创建一个材料条a
/// </summary>
/// <returns></returns>
/// <created>Andy,2019-05-08</created>
/// <changed>Andy,2019-05-08</changed>
//--------------------------------------------------------------------------------
CMaterialEntery* CAMMPriceInfo::CreateMaterialEntery()
{
#ifndef WIN32
	std::unique_lock<std::mutex> objAutoLock(m_objMutex);
#endif

	return m_arrMaterials.CreateItem();
}


//--------------------------------------------------------------------------------
/// <summary>
/// 清除低于阀值的价格
/// </summary>
/// <param name="nPriceThrd"></param>
/// <created>Andy,2019/9/8</created>
/// <changed>Andy,2019/9/8</changed>
//--------------------------------------------------------------------------------
void CAMMPriceInfo::ClearInvalidPrice(const double nPriceThrd)
{
#ifndef WIN32
	std::unique_lock<std::mutex> objAutoLock(m_objMutex);
#endif

	for (auto pMaterial : m_arrMaterials)
	{
		if (pMaterial->GetSimilarity() < nPriceThrd)
		{
			pMaterial->SetPrice(0);
			pMaterial->SetSimilarity(0);
		}

	}
}


// ********************************************************************************
/// CCloudBOQSummary
// ********************************************************************************
CCloudBOQSummary::CCloudBOQSummary()
{
    ;
}

void CCloudBOQSummary::Serialize(CJSONSerializer & refJsonSerializer) const
{
    CSerializeEntry::Serialize(refJsonSerializer);

    refJsonSerializer.Serialize("m11", m_nId);
    refJsonSerializer.Serialize("m12", m_nDate);
    refJsonSerializer.Serialize("m13", m_strName);
    refJsonSerializer.Serialize("m14", m_strCode);
    refJsonSerializer.Serialize("m15", m_strMemo);
}

void CCloudBOQSummary::DeSerialize(CJSONSerializer & refJsonSerializer)
{
    CSerializeEntry::DeSerialize(refJsonSerializer);

    refJsonSerializer.DeSerialize("m11", m_nId);
    refJsonSerializer.DeSerialize("m12", m_nDate);
    refJsonSerializer.DeSerialize("m13", m_strName);
    refJsonSerializer.DeSerialize("m14", m_strCode);
    refJsonSerializer.DeSerialize("m15", m_strMemo);
}

// ********************************************************************************
/// CAuth2LoginData
// ********************************************************************************
CAuth2LoginData::CAuth2LoginData()
{
}

void CAuth2LoginData::Serialize(CJSONSerializer & refJsonSerializer) const
{
    CSerializeEntry::Serialize(refJsonSerializer);

    refJsonSerializer.Serialize("m11", m_nType);
    refJsonSerializer.Serialize("m12", m_strState);
}

void CAuth2LoginData::DeSerialize(CJSONSerializer & refJsonSerializer)
{
    CSerializeEntry::DeSerialize(refJsonSerializer);

    refJsonSerializer.DeSerialize("m11", m_nType);
    refJsonSerializer.DeSerialize("m12", m_strState);
}

/*--------------------COpeningBidInfo-------------------------------*/
COpeningBidInfo::COpeningBidInfo()
{
}


void COpeningBidInfo::Serialize(CJSONSerializer & refJsonSerializer) const
{
	CSerializeEntry::Serialize(refJsonSerializer);

	refJsonSerializer.Serialize("m11", m_strProvince);
	refJsonSerializer.Serialize("m12", m_strMunicipality);
	refJsonSerializer.Serialize("m13", m_strCounty);
	refJsonSerializer.Serialize("m14", m_nBuildingType);
	refJsonSerializer.Serialize("m15", m_nTotalCostAvgOff);
	refJsonSerializer.Serialize("m16", m_nTenderOfferAvgOff);

}

void COpeningBidInfo::DeSerialize(CJSONSerializer & refJsonSerializer)
{
	CSerializeEntry::DeSerialize(refJsonSerializer);

	refJsonSerializer.DeSerialize("m11", m_strProvince);
	refJsonSerializer.DeSerialize("m12", m_strMunicipality);
	refJsonSerializer.DeSerialize("m13", m_strCounty);
	refJsonSerializer.DeSerialize("m14", m_nBuildingType);
	refJsonSerializer.DeSerialize("m15", m_nTotalCostAvgOff);
	refJsonSerializer.DeSerialize("m16", m_nTenderOfferAvgOff);
}

void CQueryAMMPricePara::Serialize(CJSONSerializer & refJsonSerializer) const
{
	CSerializeEntry::Serialize(refJsonSerializer);

	refJsonSerializer.Serialize("m12", m_strProvince);
	refJsonSerializer.Serialize("m13", m_strMunicipality);
	refJsonSerializer.Serialize("m14", m_strCounty);
	refJsonSerializer.Serialize("m15", m_strGUID);
	refJsonSerializer.Serialize("m16", m_strKeyWords);
	refJsonSerializer.Serialize("m17", m_strUnit);

}



void CQueryAMMPricePara::DeSerialize(CJSONSerializer & refJsonSerializer)
{
	CSerializeEntry::DeSerialize(refJsonSerializer);

	refJsonSerializer.DeSerialize("m12", m_strProvince);
	refJsonSerializer.DeSerialize("m13", m_strMunicipality);
	refJsonSerializer.DeSerialize("m14", m_strCounty);
	refJsonSerializer.DeSerialize("m15", m_strGUID);
	refJsonSerializer.DeSerialize("m16", m_strKeyWords);
	refJsonSerializer.DeSerialize("m17", m_strUnit);
}

// ********************************************************************************
/// CSubscriptionService
// ********************************************************************************
void CServiceInfo::Serialize(CJSONSerializer& refJsonSerializer) const
{
    CSerializeEntry::Serialize(refJsonSerializer);
    refJsonSerializer.Serialize("m11", m_nCode);
    refJsonSerializer.Serialize("m12", m_strName);
    refJsonSerializer.Serialize("m13", m_strComment);
}

void CServiceInfo::DeSerialize(CJSONSerializer& refJsonSerializer)
{
    CSerializeEntry::DeSerialize(refJsonSerializer);
    refJsonSerializer.DeSerialize("m11", m_nCode);
    refJsonSerializer.DeSerialize("m12", m_strName);
    refJsonSerializer.DeSerialize("m13", m_strComment);
}

// ********************************************************************************
/// CGoodsInfo
// ********************************************************************************

void CGoodsInfo::Serialize(CJSONSerializer & refJsonSerializer) const
{
    CSerializeEntry::Serialize(refJsonSerializer);
    refJsonSerializer.Serialize("m11", m_strName);
    refJsonSerializer.Serialize("m13", m_nMoney);
    refJsonSerializer.Serialize("m14", m_nPayment);
    refJsonSerializer.Serialize("m15", m_strDescription);
    refJsonSerializer.Serialize("m16", m_nId);
    refJsonSerializer.Serialize("m17", m_nServiceCode);
    refJsonSerializer.Serialize("m18", m_nDuration);
    refJsonSerializer.Serialize("m19", m_nDurationType);
    refJsonSerializer.Serialize("m20", m_nCode);
}

void CGoodsInfo::DeSerialize(CJSONSerializer & refJsonSerializer)
{
    CSerializeEntry::DeSerialize(refJsonSerializer);
    refJsonSerializer.DeSerialize("m11", m_strName);
    refJsonSerializer.DeSerialize("m13", m_nMoney);
    refJsonSerializer.DeSerialize("m14", m_nPayment);
    refJsonSerializer.DeSerialize("m15", m_strDescription);
    refJsonSerializer.DeSerialize("m16", m_nId);
    refJsonSerializer.DeSerialize("m17", m_nServiceCode);
    refJsonSerializer.DeSerialize("m18", m_nDuration);
    refJsonSerializer.DeSerialize("m19", m_nDurationType);
    refJsonSerializer.DeSerialize("m20", m_nCode);
}

// ********************************************************************************
/// CPrePayment
// ********************************************************************************
void CPrePayment::Serialize(CJSONSerializer & refJsonSerializer) const
{
    CSerializeEntry::Serialize(refJsonSerializer);
    refJsonSerializer.Serialize("describe", m_strDescribe);
    refJsonSerializer.Serialize("detail", m_strDetail);
    refJsonSerializer.Serialize("out_trad_no", m_strOutTradeNo);
    refJsonSerializer.Serialize("tatal_fee", m_nTotleFee);
    refJsonSerializer.Serialize("goods_code", m_nGoodsCode);
    refJsonSerializer.Serialize("type", m_nType);
}

void CPrePayment::DeSerialize(CJSONSerializer & refJsonSerializer)
{
    CSerializeEntry::DeSerialize(refJsonSerializer);
    refJsonSerializer.DeSerialize("describe", m_strDescribe);
    refJsonSerializer.DeSerialize("detail", m_strDetail);
    refJsonSerializer.DeSerialize("out_trad_no", m_strOutTradeNo);
    refJsonSerializer.DeSerialize("tatal_fee", m_nTotleFee);
    refJsonSerializer.DeSerialize("goods_code", m_nGoodsCode);
    refJsonSerializer.DeSerialize("type", m_nType);
}

// --------------------------------------------------------------------------------
/// <summary>
/// CFunctionalService
/// </summary>
// --------------------------------------------------------------------------------
REGISTER_CLASS(CFunctionalService)

void CFunctionalService::Serialize(CJSONSerializer& refJsonSerializer) const
{
    CSerializeEntry::Serialize(refJsonSerializer);
    refJsonSerializer.Serialize("service_code", m_nServiceCode);
    refJsonSerializer.Serialize("count", m_nCount);
}

void CFunctionalService::DeSerialize(CJSONSerializer & refJsonSerializer)
{
    CSerializeEntry::DeSerialize(refJsonSerializer);
    refJsonSerializer.DeSerialize("service_code", m_nServiceCode);
    refJsonSerializer.DeSerialize("count", m_nCount);
}

// --------------------------------------------------------------------------------
/// <summary>
/// ????х?
/// </summary>
// --------------------------------------------------------------------------------

void CEnterpriseEmploye::Serialize(CJSONSerializer& refJsonSerializer) const
{
	CSerializeEntry::Serialize(refJsonSerializer);
	refJsonSerializer.Serialize("m1", m_nID);
	refJsonSerializer.Serialize("m2", m_strName);
	refJsonSerializer.Serialize("m3", m_strSpeciality);
	refJsonSerializer.Serialize("m4", m_strCategory);
	refJsonSerializer.Serialize("m5", m_strCertificateNo);
	refJsonSerializer.Serialize("m6", m_strSealNo);
	refJsonSerializer.Serialize("m7", m_nValidityDate);
	refJsonSerializer.Serialize("m8", m_strIdentityCode);
	refJsonSerializer.Serialize("m9", m_strSubCategory);
}

void CEnterpriseEmploye::DeSerialize(CJSONSerializer & refJsonSerializer)
{
	CSerializeEntry::DeSerialize(refJsonSerializer);
	refJsonSerializer.DeSerialize("m1", m_nID);
	refJsonSerializer.DeSerialize("m2", m_strName);
	refJsonSerializer.DeSerialize("m3", m_strSpeciality);
	refJsonSerializer.DeSerialize("m4", m_strCategory);
	refJsonSerializer.DeSerialize("m5", m_strCertificateNo);
	refJsonSerializer.DeSerialize("m6", m_strSealNo);
	refJsonSerializer.DeSerialize("m7", m_nValidityDate);
	refJsonSerializer.DeSerialize("m8", m_strIdentityCode);
	refJsonSerializer.DeSerialize("m9", m_strSubCategory);
}

// --------------------------------------------------------------------------------
/// <summary>
/// CCredentialsLevel
/// </summary>
// --------------------------------------------------------------------------------

void CCredentialsLevel::Serialize(CJSONSerializer& refJsonSerializer) const
{
	CSerializeEntry::Serialize(refJsonSerializer);
	refJsonSerializer.Serialize("m1", m_nID);
	refJsonSerializer.Serialize("m2", m_strName);
	refJsonSerializer.Serialize("m3", m_strCategory);
	refJsonSerializer.Serialize("m4", m_strSubCategory);
	refJsonSerializer.Serialize("m5", m_strLevel);
	refJsonSerializer.Serialize("m6", m_nIssueDate);
	refJsonSerializer.Serialize("m7", m_nExpirationDate);
}

void CCredentialsLevel::DeSerialize(CJSONSerializer & refJsonSerializer)
{
	CSerializeEntry::DeSerialize(refJsonSerializer);
	refJsonSerializer.DeSerialize("m1", m_nID);
	refJsonSerializer.DeSerialize("m2", m_strName);
	refJsonSerializer.DeSerialize("m3", m_strCategory);
	refJsonSerializer.DeSerialize("m4", m_strSubCategory);
	refJsonSerializer.DeSerialize("m5", m_strLevel);
	refJsonSerializer.DeSerialize("m6", m_nIssueDate);
	refJsonSerializer.DeSerialize("m7", m_nExpirationDate);
}

// --------------------------------------------------------------------------------
/// <summary>
/// 企业中标业绩信息
/// </summary>
// --------------------------------------------------------------------------------

void CWinningBidAchievement::Serialize(CJSONSerializer& refJsonSerializer) const
{
	CSerializeEntry::Serialize(refJsonSerializer);
	refJsonSerializer.Serialize("m1", m_nID);
	refJsonSerializer.Serialize("m2", m_strPrjName);
	refJsonSerializer.Serialize("m3", m_strArchitect);
	refJsonSerializer.Serialize("m4", m_strRegNumber);
	refJsonSerializer.Serialize("m5", m_nAmount);
	refJsonSerializer.Serialize("m6", m_nTime);
	refJsonSerializer.Serialize("m7", m_strPrjCategory);
	refJsonSerializer.Serialize("m8", m_strConstructionScale);
	refJsonSerializer.Serialize("m9", m_strPrjLocation);
	refJsonSerializer.Serialize("m10", m_strPrjUtility);
	refJsonSerializer.Serialize("m11", m_strBidCategory);
	refJsonSerializer.Serialize("m12", m_strInfoSource);
	refJsonSerializer.Serialize("m13", m_strInfoSourceURL);
}

void CWinningBidAchievement::DeSerialize(CJSONSerializer & refJsonSerializer)
{
	CSerializeEntry::DeSerialize(refJsonSerializer);
	refJsonSerializer.DeSerialize("m1", m_nID);
	refJsonSerializer.DeSerialize("m2", m_strPrjName);
	refJsonSerializer.DeSerialize("m3", m_strArchitect);
	refJsonSerializer.DeSerialize("m4", m_strRegNumber);
	refJsonSerializer.DeSerialize("m5", m_nAmount);
	refJsonSerializer.DeSerialize("m6", m_nTime);
	refJsonSerializer.DeSerialize("m7", m_strPrjCategory);
	refJsonSerializer.DeSerialize("m8", m_strConstructionScale);
	refJsonSerializer.DeSerialize("m9", m_strPrjLocation);
	refJsonSerializer.DeSerialize("m10", m_strPrjUtility);
	refJsonSerializer.DeSerialize("m11", m_strBidCategory);
	refJsonSerializer.DeSerialize("m12", m_strInfoSource);
	refJsonSerializer.DeSerialize("m13", m_strInfoSourceURL);
}

// --------------------------------------------------------------------------------
/// <summary>
/// ??х?
/// </summary>
// --------------------------------------------------------------------------------

void CEnterpriseInfoBase::Serialize(CJSONSerializer& refJsonSerializer) const
{
	CSerializeEntry::Serialize(refJsonSerializer);
	refJsonSerializer.Serialize("m1", m_nID);
	refJsonSerializer.Serialize("m17", m_strName);
	refJsonSerializer.Serialize("m2", m_strJuridicalPerson);
	refJsonSerializer.Serialize("m3", m_nRegisteredCapital);
	refJsonSerializer.Serialize("m4", m_strStatus);
	refJsonSerializer.Serialize("m5", m_strUnifiedSocialCreditCode);
	refJsonSerializer.Serialize("m6", m_strRegistrationCode);
	refJsonSerializer.Serialize("m7", m_strType);
	refJsonSerializer.Serialize("m8", m_strIndustry);
	refJsonSerializer.Serialize("m9", m_strRegAuthority);
	refJsonSerializer.Serialize("m10", m_strProvince);
	refJsonSerializer.Serialize("m11", m_strCounty);
	refJsonSerializer.Serialize("m12", m_strMunicipality);
	refJsonSerializer.Serialize("m13", m_strAddress);
	refJsonSerializer.Serialize("m14", m_nEstablishedTime);
	refJsonSerializer.Serialize("m15", m_strContactNo);
	refJsonSerializer.Serialize("m16", m_strMemo);
	refJsonSerializer.Serialize("m17", m_strName);
}

void CEnterpriseInfoBase::DeSerialize(CJSONSerializer & refJsonSerializer)
{
	CSerializeEntry::DeSerialize(refJsonSerializer);
	refJsonSerializer.DeSerialize("m1", m_nID);
	refJsonSerializer.DeSerialize("m17", m_strName);
	refJsonSerializer.DeSerialize("m2", m_strJuridicalPerson);
	refJsonSerializer.DeSerialize("m3", m_nRegisteredCapital);
	refJsonSerializer.DeSerialize("m4", m_strStatus);
	refJsonSerializer.DeSerialize("m5", m_strUnifiedSocialCreditCode);
	refJsonSerializer.DeSerialize("m6", m_strRegistrationCode);
	refJsonSerializer.DeSerialize("m7", m_strType);
	refJsonSerializer.DeSerialize("m8", m_strIndustry);
	refJsonSerializer.DeSerialize("m9", m_strRegAuthority);
	refJsonSerializer.DeSerialize("m10", m_strProvince);
	refJsonSerializer.DeSerialize("m11", m_strCounty);
	refJsonSerializer.DeSerialize("m12", m_strMunicipality);
	refJsonSerializer.DeSerialize("m13", m_strAddress);
	refJsonSerializer.DeSerialize("m14", m_nEstablishedTime);
	refJsonSerializer.DeSerialize("m15", m_strContactNo);
	refJsonSerializer.DeSerialize("m16", m_strMemo);
}



// --------------------------------------------------------------------------------
/// <summary>
/// CCredentialsLevel
/// </summary>
// --------------------------------------------------------------------------------

void CFullEnterpriseInfo::Serialize(CJSONSerializer& refJsonSerializer) const
{
	CEnterpriseInfoBase::Serialize(refJsonSerializer);
	refJsonSerializer.Serialize("m51", m_arrEmploye);
	refJsonSerializer.Serialize("m52", m_arrCredentialsLevel);
	refJsonSerializer.Serialize("m53", m_arrWinningBidAchievement);
}

void CFullEnterpriseInfo::DeSerialize(CJSONSerializer & refJsonSerializer)
{
	CEnterpriseInfoBase::DeSerialize(refJsonSerializer);
	refJsonSerializer.DeSerialize("m51", m_arrEmploye);
	refJsonSerializer.DeSerialize("m52", m_arrCredentialsLevel);
	refJsonSerializer.DeSerialize("m53", m_arrWinningBidAchievement);
}


//--------------------------------------------------------------------------------
/// <summary>
/// 新建一个员工信息
/// </summary>
/// <returns>成功返回一个指向企业员工对象的指针</returns>
/// <created>Andy,2019/8/29</created>
/// <changed>Andy,2019/8/29</changed>
//--------------------------------------------------------------------------------
CEnterpriseEmploye* CFullEnterpriseInfo::CreateEmploye()
{
	CEnterpriseEmploye* pResult = m_arrEmploye.CreateItem();
	
	return pResult;
}

//--------------------------------------------------------------------------------
/// <summary>
/// 新建一个企业资质信息
/// </summary>
/// <returns>成功返回一个指向企业资质信息对象的指针</returns>
/// <created>Andy,2019/8/29</created>
/// <changed>Andy,2019/8/29</changed>
//--------------------------------------------------------------------------------
CCredentialsLevel* CFullEnterpriseInfo::CreateCredentialsLevel()
{
	CCredentialsLevel* pResult = m_arrCredentialsLevel.CreateItem();

	return pResult;
}

//--------------------------------------------------------------------------------
/// <summary>
/// 新建一个企业业绩信息
/// </summary>
/// <returns>成功返回一个指向企业业绩对象的指针</returns>
/// <created>Andy,2019/8/29</created>
/// <changed>Andy,2019/8/29</changed>
//--------------------------------------------------------------------------------
CWinningBidAchievement* CFullEnterpriseInfo::CreateWinningBidAchievement()
{
	CWinningBidAchievement* pResult = m_arrWinningBidAchievement.CreateItem();

	return pResult;
}


// --------------------------------------------------------------------------------
/// <summary>
/// 查询企业信息参数
/// </summary>
// --------------------------------------------------------------------------------

void CQueryEnterpriseArgs::Serialize(CJSONSerializer& refJsonSerializer) const
{
	CSerializeEntry::Serialize(refJsonSerializer);
	/*refJsonSerializer.Serialize("m1", m_strEnterpriseName);
	refJsonSerializer.Serialize("m2", m_bEnableEmploye);
	refJsonSerializer.Serialize("m3", m_strSpeciality);
	refJsonSerializer.Serialize("m4", m_strCategory);
	refJsonSerializer.Serialize("m5", m_nEmployeNum);
	refJsonSerializer.Serialize("m6", m_bEnableCredentialsLevel);
	refJsonSerializer.Serialize("m7", m_strCategory);
	refJsonSerializer.Serialize("m8", m_strType);
	refJsonSerializer.Serialize("m9", m_strSubType);
	refJsonSerializer.Serialize("m10", m_nLevel);
	refJsonSerializer.Serialize("m11", m_bEnableAchievement);
	refJsonSerializer.Serialize("m12", m_nTime1);
	refJsonSerializer.Serialize("m13", m_nTime2);
	refJsonSerializer.Serialize("m14", m_nMinAmount);
	refJsonSerializer.Serialize("m15", m_nMaxAmount);
	refJsonSerializer.Serialize("m16", m_strBidEnterpriseName);
	refJsonSerializer.Serialize("m17", m_strProvince);*/
}

void CQueryEnterpriseArgs::DeSerialize(CJSONSerializer & refJsonSerializer)
{
	CSerializeEntry::DeSerialize(refJsonSerializer);
	/*refJsonSerializer.DeSerialize("m1", m_strEnterpriseName);
	refJsonSerializer.DeSerialize("m2", m_bEnableEmploye);
	refJsonSerializer.DeSerialize("m3", m_strSpeciality);
	refJsonSerializer.DeSerialize("m4", m_strCategory);
	refJsonSerializer.DeSerialize("m5", m_nEmployeNum);
	refJsonSerializer.DeSerialize("m6", m_bEnableCredentialsLevel);
	refJsonSerializer.DeSerialize("m7", m_strCategory);
	refJsonSerializer.DeSerialize("m8", m_strType);
	refJsonSerializer.DeSerialize("m9", m_strSubType);
	refJsonSerializer.DeSerialize("m10", m_nLevel);
	refJsonSerializer.DeSerialize("m11", m_bEnableAchievement);
	refJsonSerializer.DeSerialize("m12", m_nTime1);
	refJsonSerializer.DeSerialize("m13", m_nTime2);
	refJsonSerializer.DeSerialize("m14", m_nMinAmount);
	refJsonSerializer.DeSerialize("m15", m_nMaxAmount);
	refJsonSerializer.DeSerialize("m16", m_strBidEnterpriseName);
	refJsonSerializer.DeSerialize("m17", m_strProvince);*/
}

/*----------------------------CTeamInfo-------------------------------*/
CTeamInfo::CTeamInfo(const char* pName)
	: CBaseAccountInfo(pName)
	, m_strMemo("")
{
}

CTeamInfo::CTeamInfo(const CTeamInfo & refAccountInfo)
	:CBaseAccountInfo(refAccountInfo)
	, m_strMemo(refAccountInfo.m_strMemo)
{
}

CTeamInfo & CTeamInfo::operator=(const CTeamInfo & refAccountInfo)
{
	if (this == &refAccountInfo)
	{
		return *this;
	}

	CBaseAccountInfo::operator=(refAccountInfo);
	m_strMemo = refAccountInfo.m_strMemo;

	return *this;
}

void CTeamInfo::Serialize(CJSONSerializer& refJsonSerializer) const
{
	CBaseAccountInfo::Serialize(refJsonSerializer);

	refJsonSerializer.Serialize("m11", m_strNickname);
	refJsonSerializer.Serialize("m12", m_strMemo);
}

void CTeamInfo::DeSerialize(CJSONSerializer& refJsonSerializer)
{
	CBaseAccountInfo::DeSerialize(refJsonSerializer);

	refJsonSerializer.DeSerialize("m11", m_strNickname);
	refJsonSerializer.DeSerialize("m12", m_strMemo);
}

/*--------------------------CFriendSearchSettings--------------------------------*/
CFriendSearchSettings::CFriendSearchSettings(
	const unsigned int nType
	, const char* pName)
	: CSerializeEntry()
	, m_nType(nType)
	, m_strCodeName(pName)

{
}

CFriendSearchSettings::~CFriendSearchSettings()
{

}

CFriendSearchSettings::CFriendSearchSettings(const CFriendSearchSettings & refFriendSearchSettings)
	:m_nType(refFriendSearchSettings.m_nType)
	, m_strCodeName(refFriendSearchSettings.m_strCodeName)
{
}

CFriendSearchSettings & CFriendSearchSettings::operator=(const CFriendSearchSettings & refFriendSearchSettings)
{
	if (this == &refFriendSearchSettings)
	{
		return *this;
	}

	m_nType = refFriendSearchSettings.m_nType;
	m_strCodeName = refFriendSearchSettings.m_strCodeName;

	return *this;
}

void CFriendSearchSettings::Serialize(CJSONSerializer& refJsonSerializer) const
{
	CSerializeEntry::Serialize(refJsonSerializer);

	refJsonSerializer.Serialize("m1", m_nType);
	refJsonSerializer.Serialize("m2", m_strCodeName);
}

void CFriendSearchSettings::DeSerialize(CJSONSerializer& refJsonSerializer)
{
	CSerializeEntry::DeSerialize(refJsonSerializer);

	refJsonSerializer.DeSerialize("m1", m_nType);
	refJsonSerializer.DeSerialize("m2", m_strCodeName);
}


/*--------------------------CAppendFriendSettings--------------------------------*/
CAppendFriendSettings::CAppendFriendSettings(
	const unsigned int nAccount1
	, const unsigned int nAccount2
	, const char* pMemo)
	: CSerializeEntry()
	, m_nAccount1(nAccount1)
	, m_nAccount2(nAccount2)
	, m_strMemo(pMemo)
	, m_bApproving(false)
{
}

CAppendFriendSettings::~CAppendFriendSettings()
{

}

CAppendFriendSettings::CAppendFriendSettings(const CAppendFriendSettings & refSrc)
	:m_nAccount1(refSrc.m_nAccount1)
	, m_strName1(refSrc.m_strName1)
	, m_nAccount2(refSrc.m_nAccount2)
	, m_strName2(refSrc.m_strName2)
	, m_strMemo(refSrc.m_strMemo)
	, m_bApproving(refSrc.m_bApproving)
{
}

CAppendFriendSettings & CAppendFriendSettings::operator=(const CAppendFriendSettings & refSrc)
{
	if (this == &refSrc)
	{
		return *this;
	}

	m_nAccount1 = refSrc.m_nAccount1;
	m_strName1 = refSrc.m_strName1;
	m_nAccount2 = refSrc.m_nAccount2;
	m_strName2 = refSrc.m_strName2;
	m_strMemo = refSrc.m_strMemo;
	m_bApproving = refSrc.m_bApproving;

	return *this;
}

void CAppendFriendSettings::Serialize(CJSONSerializer& refJsonSerializer) const
{
	CSerializeEntry::Serialize(refJsonSerializer);

	refJsonSerializer.Serialize("m1", m_nAccount1);
	refJsonSerializer.Serialize("m2", m_nAccount2);
	refJsonSerializer.Serialize("m3", m_strMemo);
	refJsonSerializer.Serialize("m4", m_bApproving);
	refJsonSerializer.Serialize("m5", m_strName1);
	refJsonSerializer.Serialize("m6", m_strName2);
}

void CAppendFriendSettings::DeSerialize(CJSONSerializer& refJsonSerializer)
{
	CSerializeEntry::DeSerialize(refJsonSerializer);

	refJsonSerializer.DeSerialize("m1", m_nAccount1);
	refJsonSerializer.DeSerialize("m2", m_nAccount2);
	refJsonSerializer.DeSerialize("m3", m_strMemo);
	refJsonSerializer.DeSerialize("m4", m_bApproving);
	refJsonSerializer.DeSerialize("m5", m_strName1);
	refJsonSerializer.DeSerialize("m6", m_strName2);
}


/*--------------------CTeamMemberAccountInfo----------------------------------*/
CTeamMemberAccountInfo::CTeamMemberAccountInfo(const char* pName, const char* pPwd)
	: CAccountInfo(pName, pPwd)
	, m_nTeamAccount(0)
{
}

CTeamMemberAccountInfo::CTeamMemberAccountInfo(const CTeamMemberAccountInfo & refAccountInfo)
    : CAccountInfo(refAccountInfo)
    , m_nTeamAccount(refAccountInfo.m_nTeamAccount)
{
}

CTeamMemberAccountInfo & CTeamMemberAccountInfo::operator=(const CTeamMemberAccountInfo & refAccountInfo)
{
    if (this == &refAccountInfo)
    {
        return *this;
    }

	CAccountInfo::operator=(refAccountInfo);

	m_nTeamAccount = refAccountInfo.m_nTeamAccount;   

    return *this;
}

void CTeamMemberAccountInfo::Serialize(CJSONSerializer& refJsonSerializer) const
{
	CBaseAccountInfo::Serialize(refJsonSerializer);

	refJsonSerializer.Serialize("m21", m_nTeamAccount);
}

void CTeamMemberAccountInfo::DeSerialize(CJSONSerializer& refJsonSerializer)
{
	CBaseAccountInfo::DeSerialize(refJsonSerializer);

	refJsonSerializer.DeSerialize("m21", m_nTeamAccount);	
}

CUploadFilePara::CUploadFilePara(
	const U32 nTeamAccount
	, const U32 nType
	, const char* pGUID
	, const char* pMemo)
	: m_nTeamAccount(nTeamAccount)
	, m_nType(nType)
	, m_nID(0)
	, m_nSize(0)
	, m_strGUID(pGUID)
	, m_strMemo(pMemo)
{
}

CUploadFilePara::CUploadFilePara(const CUploadFilePara & refUploadMPCFilePara)
	: m_nTeamAccount(refUploadMPCFilePara.m_nTeamAccount)
	, m_nType(refUploadMPCFilePara.m_nType)
	, m_nID(refUploadMPCFilePara.m_nID)
	, m_strMD5(refUploadMPCFilePara.m_strMD5)
	, m_nSize(refUploadMPCFilePara.m_nSize)
	, m_strGUID(refUploadMPCFilePara.m_strGUID)
	, m_strMemo(refUploadMPCFilePara.m_strMemo)
{
}

CUploadFilePara & CUploadFilePara::operator=(const CUploadFilePara & refUploadMPCFilePara)
{
	if (this == &refUploadMPCFilePara)
	{
		return *this;
	}

	m_nTeamAccount = refUploadMPCFilePara.m_nTeamAccount;
	m_nType = (refUploadMPCFilePara.m_nType);
	m_nID = (refUploadMPCFilePara.m_nID);
	m_strMD5 = (refUploadMPCFilePara.m_strMD5);
	m_nSize = (refUploadMPCFilePara.m_nSize);
	m_strGUID = (refUploadMPCFilePara.m_strGUID);
	m_strMemo = (refUploadMPCFilePara.m_strMemo);

	return *this;
}

void CUploadFilePara::Serialize(CJSONSerializer & refJsonSerializer) const
{
	CSerializeEntry::Serialize(refJsonSerializer);

	refJsonSerializer.Serialize("m1", m_nTeamAccount);
	refJsonSerializer.Serialize("m2", m_nID);
	refJsonSerializer.Serialize("m3", m_strMD5);
	refJsonSerializer.Serialize("m4", m_nSize);
	refJsonSerializer.Serialize("m5", m_strGUID);
	refJsonSerializer.Serialize("m6", m_strMemo);
	refJsonSerializer.Serialize("m7", m_nType);
	refJsonSerializer.Serialize("m8", m_strPrjName);
}

void CUploadFilePara::DeSerialize(CJSONSerializer & refJsonSerializer)
{
	CSerializeEntry::DeSerialize(refJsonSerializer);

	refJsonSerializer.DeSerialize("m1", m_nTeamAccount);
	refJsonSerializer.DeSerialize("m2", m_nID);
	refJsonSerializer.DeSerialize("m3", m_strMD5);
	refJsonSerializer.DeSerialize("m4", m_nSize);
	refJsonSerializer.DeSerialize("m5", m_strGUID);
	refJsonSerializer.DeSerialize("m6", m_strMemo);
	refJsonSerializer.DeSerialize("m7", m_nType);
	refJsonSerializer.DeSerialize("m8", m_strPrjName);
}

/*------------------CDownloadFilePara---------------------*/
CDownloadFilePara::CDownloadFilePara(const U32 nTeamAccount, const char * pGUID)
	: m_nTeamAccount(nTeamAccount)
	, m_strGUID(pGUID)
{
}

CDownloadFilePara::CDownloadFilePara(const CDownloadFilePara & refDownloadFilePara)
	: m_nTeamAccount(refDownloadFilePara.m_nTeamAccount)
	, m_strGUID(refDownloadFilePara.m_strGUID)
{
}

CDownloadFilePara & CDownloadFilePara::operator=(const CDownloadFilePara & refDownloadFilePara)
{
	if (this == &refDownloadFilePara)
	{
		return *this;
	}

	m_nTeamAccount = refDownloadFilePara.m_nTeamAccount;
	m_strGUID = (refDownloadFilePara.m_strGUID);

	return *this;
}

void CDownloadFilePara::Serialize(CJSONSerializer & refJsonSerializer) const
{
	CSerializeEntry::Serialize(refJsonSerializer);

	refJsonSerializer.Serialize("m1", m_nTeamAccount);
	refJsonSerializer.Serialize("m2", m_strGUID);
}

void CDownloadFilePara::DeSerialize(CJSONSerializer & refJsonSerializer)
{
	CSerializeEntry::DeSerialize(refJsonSerializer);

	refJsonSerializer.DeSerialize("m1", m_nTeamAccount);
	refJsonSerializer.DeSerialize("m2", m_strGUID);
}
