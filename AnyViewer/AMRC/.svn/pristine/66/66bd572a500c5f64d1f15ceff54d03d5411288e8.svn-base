//////////////////////////////////////////////////////////////////////////////////////////////
/// @file  LVNCDataPacket.h
/// @brief 本地VNC通信采用的专用数据包类定义
/// 
/// @author 黄丽云
/// @version 1.0
/// @date        2021-1-21
//////////////////////////////////////////////////////////////////////////////////////////////
#pragma once
#include "DataPacket.h"
#include "Region.h"

class CLVNCDataPacket :public CDataPacket
{
public:
	CLVNCDataPacket();
	~CLVNCDataPacket();

	using CDataPacket::CDataPacket;

	enum
	{
		PACKET_LEN_MAX = 10 * 1024 * 1024,
	};
public:
	// 提取区域信息
	void ExtractRegion(CRegion& refRegion) const;

	// 填充区域信息
	void FillRegion(const CRegion& refRegion);
	
	/// 写入数据到
	void Write(const U8* pData, const int nLen);

	int Read(U8* pData, const int nLen);

	// 移动写位置
	void SetWritingOffset(const int nOffset);

	void SetReadingOffset(const unsigned int nOffset);

	// 重新计算载荷长度
	void CalcPayloadLen();
};

